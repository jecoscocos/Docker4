# Todo List с Email функционалом

Проект содержит:
- Бэкенд на FastAPI
- Фронтенд на React
- База данных PostgreSQL
- Функционал отправки и получения писем через SMTP, IMAP и POP3

## Структура проекта

```
├── backend/         # Бэкенд на FastAPI
├── frontend/        # Фронтенд на React
└── database/        # Скрипты инициализации БД
```

## Первоначальная настройка

### 1. Настройте переменные окружения

Скопируйте файлы с шаблонами окружения и отредактируйте их (PowerShell):

```powershell
# В PowerShell
Copy-Item -Path "backend/.env.example" -Destination "backend/.env"
Copy-Item -Path "frontend/.env.example" -Destination "frontend/.env"
```

В файле `backend/.env` заполните учетные данные:
- Для почтовых протоколов (SMTP, IMAP, POP3)
- Для базы данных (POSTGRES_USER, POSTGRES_PASSWORD)

### 2. Запуск с помощью Docker

Для запуска всего приложения в PowerShell выполните:

```powershell
# Создание сети для коммуникаций между контейнерами
docker network create todo-network

# Запуск базы данных
docker build -t todo-db ./database
docker run -d --name todo-db --network todo-network `
  -e POSTGRES_DB=tododb `
  -e POSTGRES_USER=admin `
  -e POSTGRES_PASSWORD=admin123 `
  todo-db

# Запуск бэкенда
docker build -t todo-backend ./backend
docker run -d --name todo-backend --network todo-network -p 8000:8000 `
  -e POSTGRES_HOST=todo-db `
  -e POSTGRES_DB=tododb `
  -e POSTGRES_USER=admin `
  -e POSTGRES_PASSWORD=admin123 `
  todo-backend

# Запуск фронтенда
docker build -t todo-frontend ./frontend
docker run -d --name todo-frontend --network todo-network -p 3000:3000 `
  -e REACT_APP_API_URL=http://localhost:8000 `
  todo-frontend
```

После запуска приложение будет доступно по адресу: http://localhost:3000

## Функциональность

1. Создание, просмотр, редактирование и удаление задач
2. Отправка уведомлений по email
3. Просмотр входящих писем через протоколы IMAP и POP3

## Почтовые протоколы: SMTP, IMAP, POP3

### SMTP (Simple Mail Transfer Protocol)

**Назначение**: Протокол для отправки электронных писем.

**Особенности**:
- Работает по умолчанию на порту 25 (незащищенный), 587 (TLS/STARTTLS) или 465 (SSL/TLS)
- Отвечает только за отправку писем, не за их получение
- Устанавливает соединение с почтовым сервером получателя для доставки письма

**Основные команды**:
- `HELO/EHLO`: Представление клиента серверу
- `MAIL FROM`: Указание отправителя
- `RCPT TO`: Указание получателя
- `DATA`: Начало передачи содержимого письма
- `QUIT`: Завершение сессии

**Порядок работы**:
1. Установка соединения с SMTP-сервером
2. Авторизация (если требуется)
3. Отправка команд для передачи сообщения
4. Завершение сессии

### IMAP (Internet Message Access Protocol)

**Назначение**: Протокол для доступа к электронным письмам на сервере.

**Особенности**:
- Работает по умолчанию на порту 143 (незащищенный) или 993 (SSL/TLS)
- Хранит письма на сервере
- Позволяет работать с письмами с разных устройств, сохраняя их состояние (прочитано, с флагом и т.д.)
- Поддерживает работу в автономном режиме через кэширование
- Позволяет организовывать письма в папки на сервере

**Основные команды**:
- `LOGIN`: Авторизация на сервере
- `SELECT`: Выбор папки для работы
- `FETCH`: Получение писем или их частей
- `STORE`: Изменение флагов писем (прочитано, важное и т.д.)
- `SEARCH`: Поиск писем по критериям
- `LOGOUT`: Завершение сессии

**Порядок работы**:
1. Установка соединения с IMAP-сервером
2. Авторизация
3. Выбор папки
4. Выполнение команд для работы с письмами
5. Завершение сессии

### POP3 (Post Office Protocol version 3)

**Назначение**: Протокол для загрузки электронных писем с сервера на клиент.

**Особенности**:
- Работает по умолчанию на порту 110 (незащищенный) или 995 (SSL/TLS)
- По умолчанию загружает письма на клиент и удаляет их с сервера
- Простой протокол с ограниченной функциональностью
- Не хранит состояние писем на сервере
- Работа с почтой в основном происходит локально, на устройстве клиента

**Основные команды**:
- `USER/PASS`: Авторизация на сервере
- `LIST`: Получение списка писем
- `RETR`: Получение конкретного письма
- `DELE`: Пометка письма на удаление
- `QUIT`: Завершение сессии и фактическое удаление помеченных писем

**Порядок работы**:
1. Установка соединения с POP3-сервером
2. Авторизация
3. Получение списка доступных писем
4. Загрузка выбранных писем
5. Пометка загруженных писем на удаление (опционально)
6. Завершение сессии

### Сравнение IMAP и POP3

| Характеристика | IMAP | POP3 |
|----------------|------|------|
| Хранение писем | На сервере | На клиенте |
| Синхронизация | Полная, между устройствами | Нет |
| Работа с папками | Да | Нет |
| Сложность протокола | Выше | Ниже |
| Потребление трафика | Может быть оптимизировано | Загружает полное содержимое |
| Доступ к письмам | С любого устройства | Обычно с одного устройства |
| Требования к серверу | Выше (требуется хранить письма) | Ниже |

## Примечания по безопасности

1. Не коммитьте `.env` файлы в репозиторий
2. Для Gmail используйте пароли приложений вместо обычного пароля
3. Дополнительно убедитесь, что к вашим Docker-контейнерам нет публичного доступа 